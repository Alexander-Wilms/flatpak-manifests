{
  "id" : "org.gramps_project.Gramps",
  "runtime" : "org.gnome.Platform",
  "runtime-version" : "3.24",
  "runtime-commit" : "f2fc409921a84cef9b29bc39ca3782774a17aabc09c705844cb3f883d4317429",
  "sdk" : "org.gnome.Sdk",
  "sdk-commit" : "4d4e5ca289a88b9f57cbfd76abb790d20fd19196aef0244f4b2fdfdbf508e19f",
  "command" : "gramps",
  "modules" : [
    {
      "name" : "berkeley-db",
      "buildsystem" : "simple",
      "sources" : [
        {
          "url" : "http://download.oracle.com/berkeley-db/db-6.2.23.tar.gz",
          "sha256" : "47612c8991aa9ac2f6be721267c8d3cdccf5ac83105df8e50809daea24e95dc7",
          "type" : "archive"
        }
      ],
      "build-commands" : [
        "cd build_unix && ../dist/configure --prefix=/app && make && make install"
      ]
    },
    {
      "name" : "pyICU",
      "buildsystem" : "simple",
      "sources" : [
        {
          "url" : "https://pypi.python.org/packages/bc/78/f4e26f67c9b6b9074baa576ae67947e42fb86039199a65e9ab91ddb51d26/PyICU-1.9.6.tar.gz#md5=bb7838411ba9c7363503745220c754e9",
          "sha256" : "c5c2134f7ad5aa939a899633816f52d8921e787efd4e8d7efb5f450fe10f2550",
          "type" : "archive"
        }
      ],
      "build-commands" : [
        "python3 setup.py build",
        "python3 setup.py install --prefix /app",
        "echo del && rm /app/lib/python3.5/site-packages/easy-install.pth"
      ]
    },
    {
      "name" : "bsddb3",
      "buildsystem" : "simple",
      "sources" : [
        {
          "url" : "https://pypi.python.org/packages/95/1c/e8fb33007192f30b9a7276560c3c16499ab2a2c08abc59141b84e1afd3a9/bsddb3-6.1.1.tar.gz#md5=17cdf893a9bf09ef50773d2a35715a0e",
          "sha256" : "6f21b0252125c07798d784c164ef135ad153d226c01b290258ee1c5b9e7c4dd3",
          "type" : "archive"
        }
      ],
      "build-commands" : [
        "YES_I_HAVE_THE_RIGHT_TO_USE_THIS_BERKELEY_DB_VERSION=1 python3 setup.py build",
        "YES_I_HAVE_THE_RIGHT_TO_USE_THIS_BERKELEY_DB_VERSION=1 python3 setup.py install --prefix /app"
      ]
    },
    {
      "name" : "exiv2",
      "sources" : [
        {
          "url" : "http://www.exiv2.org/exiv2-0.25.tar.gz",
          "sha256" : "c80bfc778a15fdb06f71265db2c3d49d8493c382e516cb99b8c9f9cbde36efa4",
          "type" : "archive"
        },
        {
          "path" : "exiv2-no-builddir.patch",
          "type" : "patch"
        },
        {
          "commands" : [
            "cp -f /usr/share/gnu-config/config.sub ./config/",
            "cp -f /usr/share/gnu-config/config.guess ./config/"
          ],
          "type" : "shell"
        }
      ],
      "cleanup" : [
        "/bin"
      ]
    },
    {
      "name" : "gexiv2",
      "config-opts" : [
        "--enable-introspection",
        "--exec-prefix=/app",
        "--with-python3-girdir"
      ],
      "ensure-writable" : [
        "/usr/lib/*"
      ],
      "sources" : [
        {
          "url" : "https://download.gnome.org/sources/gexiv2/0.10/gexiv2-0.10.4.tar.xz",
          "sha256" : "ad8d31afdc0a1932cc44c4cfcea449497c0d0b445c0ad2f9735707b306e71ca4",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "osm",
      "sources" : [
        {
          "url" : "https://github.com/nzjrs/osm-gps-map/archive/1.1.0.tar.gz",
          "sha256" : "027004459f2f29232d4ca0c914f835e6c06b720aef1daa9b470d9d5e1b71159b",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "gramps",
      "buildsystem" : "simple",
      "sources" : [
        {
          "url" : "https://github.com/gramps-project/gramps/archive/v4.2.5.tar.gz",
          "sha256" : "1de3007215b7d0b779ec8f086e14e7a75f2aa811ee37c6d0cff06bfc9458743d",
          "type" : "archive"
        },
        {
          "path" : "gramps.patch",
          "type" : "patch"
        },
        {
          "path" : "python.patch",
          "type" : "patch"
        }
      ],
      "build-commands" : [
        "python3 setup.py build",
        "python3 setup.py install --prefix /app"
      ]
    }
  ],
  "finish-args" : [
    "--socket=wayland",
    "--socket=x11",
    "--share=network"
  ],
  "rename-desktop-file" : "gramps.desktop",
  "rename-appdata-file" : "gramps.appdata.xml",
  "rename-icon" : "gramps"
}